<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>Yuchi 的學習筆記</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Yuchi 的學習筆記">
<meta property="og:url" content="https://yuchitung.github.io/page/2/index.html">
<meta property="og:site_name" content="Yuchi 的學習筆記">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yuchi 的學習筆記">
  
    <link rel="alternate" href="/atom.xml" title="Yuchi 的學習筆記" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Yuchi 的學習筆記</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://yuchitung.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-liskov-substitution-principle" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/24/liskov-substitution-principle/" class="article-date">
  <time datetime="2019-06-24T14:34:38.000Z" itemprop="datePublished">2019-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/24/liskov-substitution-principle/">里氏替換原則</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Derived classes must be substitutable for their base classes.<br>– <cite>Robert C. Martin</cite></p>
</blockquote>
<p>里氏替換原則，全名 <strong>Liskov substitution principle</strong>，簡稱 <strong>LSP</strong>。  </p>
<h2 id="定義"><a href="#定義" class="headerlink" title="定義"></a>定義</h2><p><code>子類別要能替換掉父類別</code>而不影響程式架構，並且所有<code>父類別能做的事，子類別也要可以做</code>。</p>
<h2 id="秘訣"><a href="#秘訣" class="headerlink" title="秘訣"></a>秘訣</h2><ul>
<li>對介面寫程式，重點放在要執行的動作  </li>
<li>方法簽名、回傳值與丟出的異常要一致  </li>
<li>思考繼承時子類別所造成的「行為變化」要如何設計才<code>不會違反父類別介面的合約</code></li>
</ul>
<h2 id="提醒"><a href="#提醒" class="headerlink" title="提醒"></a>提醒</h2><ul>
<li>依賴子類別的地方不能用父類別取代</li>
<li>拋棄繼承，思考可否改用組合的方式</li>
</ul>
<h2 id="範例"><a href="#範例" class="headerlink" title="範例"></a>範例</h2><p>來看看範例。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Scooter</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> $name;</span><br><span class="line">   <span class="keyword">private</span> $fuelTankCapacity;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getFuelTankCapacity</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Yamaha extends Scooter()</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Kymco extends Scooter()</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Gogoro extends Scooter()</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>是不是有點怪怪的…Gogoro 沒有油箱啊！！！<br>子類別並沒有完全實作父類別有的功能，違反了里氏替換原則。<br>那麼來稍微改一下程式。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ElectricScooter</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $name;</span><br><span class="line">    <span class="keyword">private</span> $batteryCapacity;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getName</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getBatteryCapacity</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Gogoro extends ElectricScooter()</span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Scooterist</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $scooter;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setScooter</span><span class="params">(Scooter $scooter)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;scooter = $scooter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$yamaha = <span class="keyword">new</span> Yamaha();</span><br><span class="line">$scooterist = <span class="keyword">new</span> Scooterist();</span><br><span class="line">$Scooterist-&gt;setScooter($yamaha);</span><br></pre></td></tr></table></figure>
<p>另外定義一個 ElectricScooter 類別，然後讓 Gogoro 去繼承它，就解決了這個問題。<br>並且每個子類別都可以替代其父類別，也符合里氏替換原則。最後，也許再把動力來源抽出來定義成介面會更好，不過還是要實際情況來考慮。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://youtu.be/SLCajYNcThE?t=3775" target="_blank" rel="noopener">PHP 也有 Day #19 - PHP 返樸歸真系列之從實例學設計模式 by 大澤木小鐵 (Jace Ju)​</a><br><a href="https://clouding.city/php/solid/" target="_blank" rel="noopener">物件導向設計原則 SOLID</a><br><a href="http://teddy-chen-tw.blogspot.com/2014/04/solid.html" target="_blank" rel="noopener">SOLID：五則皆變</a><br><a href="http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod" target="_blank" rel="noopener">The Principles of OOD</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuchitung.github.io/2019/06/24/liskov-substitution-principle/" data-id="ckcdhgeg8000aqay5i86gbgbw" class="article-share-link">Share</a>
      
        <a href="https://yuchitung.github.io/2019/06/24/liskov-substitution-principle/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/oop/">oop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/solid/">solid</a></li></ul>

    </footer>
  </div>
  
  
</article>


  
    <article id="post-open-closed-principle" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/24/open-closed-principle/" class="article-date">
  <time datetime="2019-06-24T14:33:35.000Z" itemprop="datePublished">2019-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/24/open-closed-principle/">封閉開放原則</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>You should be able to extend a classes behavior, without modifying it.<br>– <cite>Robert C. Martin</cite></p>
</blockquote>
<p>封閉開放原則，全名 Open-closed Principle，簡稱 OCP。</p>
<h2 id="定義"><a href="#定義" class="headerlink" title="定義"></a>定義</h2><blockquote>
<p>對擴充開放，對修改封閉。</p>
</blockquote>
<p>第一次看到的話是不是很匪夷所思，要怎麼新增功能又不修改程式碼呢？<br>其實是<code>新增功能(擴充)，但是不修改舊有的功能(對修改封閉)</code>，也就是只要把程式寫成在之後要新增功能時，不需要改動原本有的功能就好了。</p>
<h2 id="怎麼做呢？"><a href="#怎麼做呢？" class="headerlink" title="怎麼做呢？"></a>怎麼做呢？</h2><p>實踐這個原則的手法有不少，還是要依照實際的情境選擇適合的方法。<br>以下是可以參考的作法：</p>
<ul>
<li>利用繼承</li>
<li>利用抽象介面</li>
<li>依賴倒轉 (Dependency Injection pattern, DIP)</li>
<li>裝飾者模式</li>
<li>策略模式</li>
</ul>
<h2 id="秘訣"><a href="#秘訣" class="headerlink" title="秘訣"></a>秘訣</h2><p>如果還是不知道麼開始的話，試著用<code>抽象層級</code>的方式去思考類別，不要把功能寫死，試著寫成抽象的概念，然後把會<code>造成改變的選項較給別的類別處理</code>，主要類別還是專心處裡核心任務。最後，通常變化都是後來才出現的，一開始設計的時候，不一定會構思到要這樣寫，之後再透過重構完成即可。</p>
<h2 id="範例"><a href="#範例" class="headerlink" title="範例"></a>範例</h2><p>看個範例吧！<br>下面這一段程式碼，假設我們有一台 Nintendo 主機，然後我們手邊有三款遊戲可以玩，要玩的時候呼叫 play function 就可以了。<br>但是，如果我每買一款遊戲就要新增遊戲在這個 Nintendo 類別裡面…</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Nintendo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">play</span><span class="params">(string $game)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       <span class="keyword">switch</span> ($game) &#123;</span><br><span class="line">           <span class="keyword">case</span> <span class="string">'mario'</span>:</span><br><span class="line">               $mario = <span class="keyword">new</span> Mario();</span><br><span class="line">               $mario-&gt;start();</span><br><span class="line">           <span class="keyword">case</span> <span class="string">'car-racing'</span>:</span><br><span class="line">               $carRacing = <span class="keyword">new</span> CarRacing();</span><br><span class="line">               $carRacing-&gt;start();</span><br><span class="line">           <span class="keyword">case</span> <span class="string">'pokemon'</span>:</span><br><span class="line">               $pokemon = <span class="keyword">new</span> Pokemon();</span><br><span class="line">               $pokemon-&gt;start();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>試著改改看…<br>把 game 抽出來寫成介面，定義一些所有遊戲都會需要的基本功能，之後每一款遊戲再各自去實作細節。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Game</span> </span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">start</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mario</span> <span class="keyword">implements</span> <span class="title">Game</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">protected</span> $mario;</span><br><span class="line">   <span class="keyword">protected</span> $wario;</span><br><span class="line">   <span class="keyword">protected</span> $luigi;</span><br><span class="line">   ...</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       <span class="comment">//initialize characters...</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">start</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       ...</span><br><span class="line">   &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarRacing</span> <span class="keyword">implements</span> <span class="title">Game</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">start</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       ...</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pokemon</span> <span class="keyword">implements</span> <span class="title">Game</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">start</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       ...</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下來，把 Nintendo 改成這樣</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Nintendo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">play</span><span class="params">(Game $game)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">       $game-&gt;start();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以後，每新增一款遊戲<code>(對擴充開放)</code>，我們也不會動到 Nintendo 了<code>(對修改封閉)</code>，喔耶！<br>而且 Nintendo 在呼叫 play 時，也不用管你是什麼遊戲，只要讓遊戲呼叫 start 就好了。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.youtube.com/watch?v=SLCajYNcThE&amp;t=954s" target="_blank" rel="noopener">PHP 也有 Day #19 - PHP 返樸歸真系列之從實例學設計模式 by 大澤木小鐵 (Jace Ju)​</a><br><a href="https://clouding.city/php/solid/" target="_blank" rel="noopener">物件導向設計原則 SOLID</a><br><a href="http://teddy-chen-tw.blogspot.com/2014/04/solid.html" target="_blank" rel="noopener">SOLID：五則皆變</a><br><a href="http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod" target="_blank" rel="noopener">The Principles of OOD</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuchitung.github.io/2019/06/24/open-closed-principle/" data-id="ckcdhgegj000kqay5v9spmx4c" class="article-share-link">Share</a>
      
        <a href="https://yuchitung.github.io/2019/06/24/open-closed-principle/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/oop/">oop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/solid/">solid</a></li></ul>

    </footer>
  </div>
  
  
</article>


  
    <article id="post-single-responsibility-principle" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/24/single-responsibility-principle/" class="article-date">
  <time datetime="2019-06-24T14:33:06.000Z" itemprop="datePublished">2019-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/24/single-responsibility-principle/">單ㄧ職責原則</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>A class should have one, and only one, reason to change.<br>– <cite>Robert C. Martin</cite></p>
</blockquote>
<p>單ㄧ職責原則，全名 <strong>Single Responsibility Principle</strong>，簡稱 <strong>SRP</strong>。<br>個人覺得 SRP 是 SOLID 六大原則中最簡白易懂的原則。  </p>
<h2 id="定義"><a href="#定義" class="headerlink" title="定義"></a>定義</h2><p>應該且僅有一個原因引起類別的變更，讓類別只有一個職責。</p>
<h2 id="秘訣"><a href="#秘訣" class="headerlink" title="秘訣"></a>秘訣</h2><ul>
<li>關注點分離，一個類別只應有一個核心任務</li>
<li>不要貪方便全塞一起</li>
<li>注意切太細會有類別太多的問題</li>
</ul>
<h2 id="提醒"><a href="#提醒" class="headerlink" title="提醒"></a>提醒</h2><ul>
<li>設計階段就可以避開類別職責太大的問題</li>
<li>但小心在維護階段受到誘惑又讓類別職責變多，所以，想清楚類別的<code>核心價值</code>，若是需要開新的類別，當開則開</li>
</ul>
<h2 id="範例"><a href="#範例" class="headerlink" title="範例"></a>範例</h2><p>先來看一個例子，下面這個例子是否有可以優化的地方？</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $products;</span><br><span class="line">    <span class="keyword">private</span> $amount;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">calculateAmount</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;products) &#123;</span><br><span class="line">            <span class="comment">// calculate total amount...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">printInvoice</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">         <span class="comment">//download a PDF invoice</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">printPackingList</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//download a PDF packing list</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>稍微修改一下，把輸出檔案的部分拆出來，這樣 Order 是不是看起來就更能專注在核心的工作項目上，有關輸出成單據的部分都拆出去，之後也可能會有不同的單據要輸出，擴充性也能更好。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Order</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> $products;</span><br><span class="line">    <span class="keyword">private</span> $amount;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">calculateAmount</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;products) &#123;</span><br><span class="line">            <span class="comment">// calculate total amount...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Printable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">print</span><span class="params">(Order $order)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InvoicePrinter</span> <span class="keyword">implements</span> <span class="title">Printable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">print</span><span class="params">(Order $order)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $contensts = $order-&gt;getContents();</span><br><span class="line">       <span class="comment">//prepare PDF then download...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PackingListPrinter</span> <span class="keyword">implements</span> <span class="title">Printable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">print</span><span class="params">(Order $order)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $contensts = $order-&gt;getContents();</span><br><span class="line">       <span class="comment">//prepare PDF then download...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://youtu.be/SLCajYNcThE?t=1953" target="_blank" rel="noopener">PHP 也有 Day #19 - PHP 返樸歸真系列之從實例學設計模式 by 大澤木小鐵 (Jace Ju)​</a><br><a href="https://clouding.city/php/solid/" target="_blank" rel="noopener">物件導向設計原則 SOLID</a><br><a href="http://teddy-chen-tw.blogspot.com/2014/04/solid.html" target="_blank" rel="noopener">SOLID：五則皆變</a><br><a href="http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod" target="_blank" rel="noopener">The Principles of OOD</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuchitung.github.io/2019/06/24/single-responsibility-principle/" data-id="ckcdhgeh0000wqay5shbdffi0" class="article-share-link">Share</a>
      
        <a href="https://yuchitung.github.io/2019/06/24/single-responsibility-principle/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/oop/">oop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/solid/">solid</a></li></ul>

    </footer>
  </div>
  
  
</article>


  
    <article id="post-solid" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/24/solid/" class="article-date">
  <time datetime="2019-06-24T14:31:44.000Z" itemprop="datePublished">2019-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/24/solid/">淺談 SOLID</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote>
<p>你該學的不是設計模式<br>而是物件導向開發原則<br>– <cite>大澤木小鐵</cite></p>
</blockquote>
<p>初學者在學習設計模式的時候，常常一知半解，學了以後好像也不是能很順利並適當地使用在專案上，筆者也是如此。直到看過鐵哥講解 SOLID 後，才意識到在使用設計模式之前，應該先好好學習 SOLID 的精神。鐵哥曾說過如果能掌握 SOLID，有沒有一定要使用設計模式也就沒有那麼重要了。可以想見，SOLID 是多麽重要的一個概念。</p>
<h2 id="SOLID"><a href="#SOLID" class="headerlink" title="SOLID"></a>SOLID</h2><p>SOLID 是由 Robert C. Martin(Uncle Bob)在 Agile software development (2002) 一書中提到的五個設計原則。很推薦做為物件導向程式開發時的一些心法，是五個概念的縮寫，但是在學習 SOLID 時有的文章也會列入 LKP ，所以筆者也將之列了進來：</p>
<p><strong>單一職責原則 (Single responsibility principle, SRP)</strong><br><strong>開放封閉原則 (Open-Close principle, OCP)</strong><br><strong>里氏替換原則 (Liskov substitution principle, LSP)</strong><br><strong>最小知識原則 (Least knowledge principle,LKP)</strong><br><strong>介面隔離原則 (Interface segregation principle, ISP)</strong><br><strong>依賴反轉原則 (Dependency inversion principle, DIP)</strong></p>
<p>若是開發的時候能遵守這六個原則，程式的品質也會大大提升。</p>
<p>再次節錄一段鐵哥在簡報裡放的整理：</p>
<p><strong>SRP: 降低單一類別被「改變」所影響的機會</strong><br><strong>OCP: 讓主要類別不會因為「新需求」而改變</strong><br><strong>LSP: 避免繼承時子類別所造成的「行為改變」</strong><br><strong>LKP: 避免暴露過多資訊造成用戶端因流程調整而改變</strong><br><strong>ISP: 降低用戶端因為不相關介面而被改變</strong><br><strong>DIP: 避免高階程式因為低階程式改變而被迫改變</strong>  </p>
<h2 id="面對改變"><a href="#面對改變" class="headerlink" title="面對改變"></a>面對改變</h2><p>如果看完了這些原則，也許會發現其實 SOLID 就是在說<code>面對改變的策略</code>。<br>需求總是一直在變的，但是我們要怎麼在每次變化的過程中，確保改變不會帶來災難，或是埋下壞味道的種子，試著用 SOLID 去思考我們的程式碼，就可以降低改變帶來的影響。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.youtube.com/watch?v=SLCajYNcThE&amp;t=954s" target="_blank" rel="noopener">PHP 也有 Day #19 - PHP 返樸歸真系列之從實例學設計模式 by 大澤木小鐵 (Jace Ju)​</a><br><a href="https://clouding.city/php/solid/" target="_blank" rel="noopener">物件導向設計原則 SOLID</a><br><a href="http://teddy-chen-tw.blogspot.com/2014/04/solid.html" target="_blank" rel="noopener">SOLID：五則皆變</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuchitung.github.io/2019/06/24/solid/" data-id="ckcdhgegy000uqay5e9spllup" class="article-share-link">Share</a>
      
        <a href="https://yuchitung.github.io/2019/06/24/solid/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/oop/">oop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/solid/">solid</a></li></ul>

    </footer>
  </div>
  
  
</article>


  
    <article id="post-mvc-and-mvvm" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/15/mvc-and-mvvm/" class="article-date">
  <time datetime="2019-06-15T12:31:34.000Z" itemprop="datePublished">2019-06-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/15/mvc-and-mvvm/">淺談 MVC &amp; MVVM</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="為什麼要分層？"><a href="#為什麼要分層？" class="headerlink" title="為什麼要分層？"></a>為什麼要分層？</h2><p>實踐單一職責原則，將工作項拆分，各單元只專注在自己的工作上。<br>而前後端分離的概念更甚者把資料的提供與畫面的呈現完全拆分開來。</p>
<h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>MVC 這個名字是來源自桌面應用程式的架構，而在 web 世界裡，其實 MVC 真正的名字應是叫做 Model2，但是因為同樣都有 model、controller、view 的結構，所以名字常被誤用，久而久之，大家也都習慣稱其為 MVC，以下內容也都以 MVC 稱呼之。</p>
<p>MVC 是最基本且常見的分工架構，MVC 架構中將工作分成三層：</p>
<ul>
<li><p>Model:<br>負責與資料庫之間的聯繫，以及處理資料邏輯。</p>
</li>
<li><p>View:<br>負責視覺的呈現。</p>
</li>
<li><p>Controller:<br>在 view 與 model 之間的橋樑，屬於分配者或是控制者的角色。</p>
</li>
</ul>
<p><img src="https://lh3.googleusercontent.com/3_mvHSPfMqe88SnmOLFaPpMhJnS71aDk0BjSSUQ2gwBNYMJa_JjFFIJ2P78CWB7nphzEyLx9fPo794UTnNmv23oz0Bbo4hX0RlG6zccKaAF36ijONad8abe1dIU3x-eBPiVd9dPs41HvmgyFSOKWFcgaF6w5ouJvVnZRj4invbFlqOPtrWoInw3s9jTptdv4-NbMahy-f_IXYvJLoulq-D5FMGB3jiw7p0fYNS558DIoazBNg0-eohrNHuRSzAiD_h6B89BF0G16J9oP4zfIhYzkOy6ZmXvTR0YWxnB4qrIMcl_z9Xtp-Vjmp2RezR7eOMBJxSpCxIvbn7xS_2XHSNp5zufJNbbS6inyj9oU-jqy8CQTRjd0ODRVoMfL4Fl_FuRJyBdDX7qqeDBEe1N3Kwen---XFPmbpCVC12vwM90yi1MrP1Y_73w_kLX3xn7MdrQtmCean3VFrSNOdG-aKk2kJbNk-BpTzAV-Q79VtFsJ34_2KDCy2YEoDIIMc_SWHbxk2go6W-uftauLdLY8yNIlN1EmLdNOjbhm_vpLGX-j8YP7FzaJLsGEhZg-2w_PJZNoldQk90jBFIg4TZlhR-z54EExqjpOuufJOiTQK_Qw0J1AIQS-1KtU-S2Vth5CFbYEQr5slKmcz5HMfVVrMA5lWGU_XZ5M=w1145-h955-no" width="50%"></p>
<p><br></p>
<h2 id="Server-side-render-下的-MVC"><a href="#Server-side-render-下的-MVC" class="headerlink" title="Server side render 下的 MVC"></a>Server side render 下的 MVC</h2><p>在 server side render 的架構下，整個網頁包含資料和視覺呈現都是在後端處理，瀏覽器只是顯示整份 html。</p>
<p><img src="https://lh3.googleusercontent.com/dud2BZvQy6gTu55Au4v_f47cZXfpqgcJCkibutTDVZyPHb8RrFWcnb1CgtoOiUxNbLo4zrRtxCCjMniCmBDWREOcVZtkkBGAPnAeG4sK51GmqgZeFU22T_1djOp9h__Eg_nELYeDByb2U3bmsp8CVK_zRFl5FyS1SeFGS_f2ej8nNbPKRV_x5eqkPBIXM9BJtOjkZkZoxoaTMZigpqYY4bL-luROi-Fby_X2nWF9OHdtyjLz0gJRBEHIe0kQ9TLB8LrV9Fso8GsKGMsFZ66oxhTmW0fkoLdWKRBw2mT0E5iCB0DZg5gvaJKN_3XynM6g5yOeu0XkIc9LiL_gGlV44RL2MP1Jy0whjvdWKM1fLsKEy1GgDwol_Brg1Y-HVvPSCDNPTb5y5bNaSv3ZT5yYk92YCqHbRtApXmCY6_3HAWniI18C76BcWcZffGFeov2l1FgyvAtCv-WbaErG77cqHhGy1LKT2j_n7H0qnz6-6DWYDcQDtUh5Xt3mW9cOchJUgJrYkFV4t0aEMVvOG9N6MXRjGrNlvI3KM6z25BCa9JmZG8pzxuDSuOASO_aC8c7GP_CC6nwqTr0n9JnoZFDSGD5XEQpGWdlUcaOddsHoFTyexyYodom5sKFH2PlptpsPsP8CrqThtr6f5QJfCU3UmHrPcDyR8gvV=w2210-h924-no"></p>
<p><br></p>
<h2 id="Client-side-render-下的-MVC"><a href="#Client-side-render-下的-MVC" class="headerlink" title="Client side render 下的 MVC"></a>Client side render 下的 MVC</h2><p>現代的網頁為了讓使用者有更好的使用體驗，不要每個動作或是切換頁面都重新刷新整個頁面。誕生了client side render 的做法，一開始載入 document 時只是一個空的 html，所有的資料都是之後用動態載入，再埋入 html 裡面。</p>
<p>可以看到，這樣的架構下，server 是不處理有關 view 呈現的工作，都是交由前端在瀏覽器完成。而圖中那個 view 區塊事實上是可以進一步拆成前端的 MVC 或是 MVVM。<br><img src="https://lh3.googleusercontent.com/gh3hpwEP9ktXgaDdsE9eZRn-EGm8atYMkQo0b_5vSVS9Mxai13h98qC4JAcZUjsEVFsuP3FlzD1Hf_t5I1eX4WjX3EUuKHa9s1Bf7tO_oT63yXVaNvz9umLLMLpaY0jnt1YN5D47_ua3CsOuiT72nf6wFgV_UUs3Hnbtl6M93wdSUtb2gPOz6QPUSqO1AZHtwXlraKQB58RapG3a0psO5o2_h4gH_yeewuK6Z6u9z0YkO1epVlrpB5kTY5RsbNYW44udMR5vJ5AesSX-WCnV6EzJzDcvTx_iXozKTl6aBDiCVSaXOym9PbDnE1NVkJzTX8sNeKRCZOpo45w0tnId7zavsbaZZRIeQBkS1yKb94p7773yYWppEn_HXsp0PFYmtwpoXffLayN5psa-cGeVYE6PtJa0-p4Rj8PBZ2AV2t_K2SzPKApXPz9vQTgyUdqbmstv1wonbfg3RzzOBvft3z8q3lkzoWYiaoTbp20YJyMNHYgN6LT19BT6KEzv_W7PPIcfT5NVsyoLjONzaRjVQqmuhPuDN2OwWmqXSXyGJ5nP8XZDM4N7lYzlktH4FYKuS_69MqgG-zGmte0y2j-eJkapLy6fJrVJNOZ1uDBAHtf-G9MZioM2SKxqMBbuLLl9mXzwjOwaVSMre21ogkI_SMfTN4RiWUZ-=w2210-h1306-no"></p>
<p><br></p>
<h2 id="前後端大亂鬥"><a href="#前後端大亂鬥" class="headerlink" title="前後端大亂鬥"></a>前後端大亂鬥</h2><p>來看看，把前後端整合起來，會長怎樣呢？</p>
<p><img src="https://lh3.googleusercontent.com/0HRmxVV1GDJXqjtDg5_j8-xJ76d-4Ie-aSnh3zqiuZ8BL1_Vcn3X5Or0zpMMqs5UUXqx2P5O1iVdM88a6OlkA17afYWVkSRy3VsbBfHAvy439AjVkecT1zMhRTvAggCOL4kR6BPFlg9HDV9wgm-U2sb5ynpF9N9jhed8aVvw_64BfuBzGRyZab8XqM3pItlqAfzRmGgQ7LwgKg19SNnh24BX-DpuR44c2L0V82BGfiv-dUd2kdqmiQ1CzQw-2fJ5IURwTiOpOq-0bsGFyeIa1rIs7o0f9j9ZxZQEa1VMNmsC-mXpULJ4QsTCXfScpa9TavIBaW3ZM9YazGf29AImDbioqXHxFXnGAbgnu9UbzwFrtwp-sr86Dx2GiugFnVsTzhtyiMfpqN5Coa8MzfJ_WTIVtSSzh2pJIaX_cAEtuPjuz8neHP3Vw-Puk1r_cIegBAi4Z-aLcwlrxMJC8aWrrnt4PZYaOXsrQ2y1YRE6Ns2A2snyiw1BXS6yLK-vwJ7dF8r16DB8yfvFXU1ClYup1HvVRHx5dmcxk8hxEWGHziWgv_lFdC4sOvahMV4PuM6ssyabybGJSRS6jL34MV2bEQZf28nEQS7C70lkaG4Fdh-iSKWTBrtuACaOD6eAYWJSzfFP1lq7iqGq_QSSMT7GClxaOEqM6bdncnY3qWvoymeTBqmqWEGBa-Bj7PfDvlA=w1275-h1545-no?authuser=0"></p>
<h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><p>基於前端需求所發展出的架構。<br>分層如下：</p>
<ul>
<li>Model:<br>通常是與 server 介接取得資料，或是處理 client 端預先載入的資料。</li>
<li><p>View:<br>負責視覺的呈現。</p>
</li>
<li><p>View-model:<br>在 view 與 view-model 之間的橋樑，達成資料雙向綁定的效果。當 view 有動作被觸發，會自動更新 model，model 有資料更新也會自動更新 view。由於實現了雙向綁定，view-model的內容會即時呈現在 view 層，前端開發者再也不必繁複地通過 js 或是 jQuery 操縱 DOM 去更新 view，而 view 和 model 也就此解耦合，前端的工作分工更為乾淨。常見使用 MVVM 的框架有 angular, vue。<br><img src="https://lh3.googleusercontent.com/r6Wno2Ph5aXFBVUuWCa5XpYfWPnoSFh3Kj8dKafx5iLjUReDWvJUVpEKvVoDBJYCPfreEB6q3BHMPltkQyRIz4DkwgYUlnj0iDUq2HrNd7ixah6llcVAq10C3yQoZEBmiw8-EvsW18CC45IGLUCDLZwQJofEAJHJVpDal7n7cQkqL5NcaZsNPcc_47LSNljuzl56qZ-lNgcG2-hKGSt4ghQcOwnXfXYGtyXno-lDWF9uLjqH3qLnRdKCRSLpyh7M5N7pefhMKK6XZ7ZLEZJU57Ni5rEINqjfdMQbT9u2SqT0pNgzRaPZzet2Efaq3UAk_4RC3pwJa8i_KJuBGfUccqdOB12G-9k6-y_Xn1XncYxlieQvjTWNwaysWneRnJVZL4U_2LtHHa-DKnDqmP8Ln7NVqWwfluBWX0j9WoD91NnbtbKgrEcSEDj29NkNSY4nCc9B4ln0C7HBOkn-KPvn-da1njuHieDuap5sKytLveu2G4_NIgFD5BU8iRKUoKSaS8rrQez60Us_ivRMd7KMADz5kzcnhhEScBEx5GTskBLP-4syOUFQjN67uR3lyM84AHNUhZnsiXSgt-1-F9xQQ2i1pmHdoJHTaTBPQODdjTwRENfmLbYMtZVKL1EqxZiy_EzgcUdloPfuIQS8CJltVeXMf2Z5JZeF=w1145-h960-no" width="50%"></p>
</li>
</ul>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://www.ithome.com.tw/node/77330" target="_blank" rel="noopener">MVC與Model 2的變異與結合</a></p>
<p><a href="https://blog.techbridge.cc/2017/09/16/frontend-backend-mvc/" target="_blank" rel="noopener">前後端分離與 SPA</a></p>
<p><a href="http://www.syscom.com.tw/ePaper_New_Content.aspx?id=498&amp;EPID=219&amp;TableName=sgEPArticle" target="_blank" rel="noopener">淺談MVVM架構</a></p>
<p><a href="https://draveness.me/mvx" target="_blank" rel="noopener">淺談MVC、MVP 和MVVM 架構模式</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuchitung.github.io/2019/06/15/mvc-and-mvvm/" data-id="ckcdhgegn000mqay5pzgnn90r" class="article-share-link">Share</a>
      
        <a href="https://yuchitung.github.io/2019/06/15/mvc-and-mvvm/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/">web</a></li></ul>

    </footer>
  </div>
  
  
</article>


  
    <article id="post-identify-users-with-cookie-and-session" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/15/identify-users-with-cookie-and-session/" class="article-date">
  <time datetime="2019-04-14T23:58:20.000Z" itemprop="datePublished">2019-04-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/15/identify-users-with-cookie-and-session/">使用 cookie 和 session 來紀錄使用者狀態</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>HTTP 本身是無狀態(Stateless)的通訊協定(Protocol)。<br>但是可以用 cookie ＆ session 在客戶端與伺服器之間存取一些使用者狀態。<br><br></p>
<h2 id="session-amp-cookie"><a href="#session-amp-cookie" class="headerlink" title="session &amp; cookie"></a>session &amp; cookie</h2><p>在講解如何處理使用者狀態之前，先簡單釐清 cookie &amp; session。<br>cookie 是存在 client 端的，session 是存在 server 端的。<br><br></p>
<h2 id="如何用-session-紀錄使用者狀態"><a href="#如何用-session-紀錄使用者狀態" class="headerlink" title="如何用 session 紀錄使用者狀態"></a>如何用 session 紀錄使用者狀態</h2><p>想像去飲料店點飲料，店員發給你號碼牌，之後你可以用號碼牌來領你的飲料。<br>你就是 client，飲料店就是 server，號碼牌就是 session id。</p>
<p>換到真實的情境，server 端設定 session 開始後，會自動產生一個 session id。<br>這時候我們可以在 session 裡額外加上 user id。<br>接著在 response headers 會自動被加上下面內容，指示瀏覽器要存一個名為 PHPSESSID 的 cookie。</p>
<p>response header<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: PHPSESSID=8afd28b38e013478f508473db0dfd172; path=/</span><br></pre></td></tr></table></figure></p>
<p>之後 client 端每次向 server 請求時就會夾帶著 cookie。</p>
<p>request header<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie: PHPSESSID=8afd28b38e013478f508473db0dfd172</span><br></pre></td></tr></table></figure></p>
<p>server 端收到後就會根據 session id 來識別這是哪個 session 的請求，<br>這時候我們只要再看看 session 裡的 user id 就知道哪位 user 了。特別說明一下，中間 cookie 夾帶 session id 的傳遞都是背後會自動去執行的，server 和 client 都不用做額外的操作。</p>
<p>缺點：</p>
<ul>
<li>session 過期前會一直佔用 server 資源<br><br></li>
</ul>
<h2 id="用-session-實作-login-amp-logout"><a href="#用-session-實作-login-amp-logout" class="headerlink" title="用 session 實作 login &amp; logout"></a>用 session 實作 login &amp; logout</h2><p>以下用 session 來實做一下使用者登入。</p>
<p>Login form<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">""</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span> placeholder=<span class="string">"Enter your username"</span> required&gt;</span><br><span class="line">    &lt;input type=<span class="string">"password"</span> name=<span class="string">"password"</span> placeholder=<span class="string">"Enter your password"</span> required&gt;</span><br><span class="line">    &lt;input type=<span class="string">"submit"</span> value=<span class="string">"Submit"</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></p>
<p>Process Login<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">session_start();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( ! <span class="keyword">empty</span>( $_POST ) ) &#123;</span><br><span class="line">    <span class="keyword">if</span> ( <span class="keyword">isset</span>( $_POST[<span class="string">'username'</span>] ) &amp;&amp; <span class="keyword">isset</span>( $_POST[<span class="string">'password'</span>] ) ) &#123;</span><br><span class="line">        <span class="comment">// Getting submitted user data from database</span></span><br><span class="line">        $db = <span class="keyword">new</span> mysqli($db_host, $db_user, $db_pass, $db_name);</span><br><span class="line">        $sql = $db-&gt;prepare(<span class="string">"SELECT * FROM users WHERE username = ?"</span>);</span><br><span class="line">        $sql-&gt;bind_param(<span class="string">'s'</span>, $_POST[<span class="string">'username'</span>]);</span><br><span class="line">        $sql-&gt;execute();</span><br><span class="line">        $result = $sql-&gt;get_result();</span><br><span class="line">    	$user = $result-&gt;fetch_object();</span><br><span class="line">    		</span><br><span class="line">    	<span class="comment">// Verify user password and set $_SESSION</span></span><br><span class="line">    	<span class="keyword">if</span> ( password_verify( $_POST[<span class="string">'password'</span>], $user-&gt;password ) ) &#123;</span><br><span class="line">    		$_SESSION[<span class="string">'user_id'</span>] = $user-&gt;ID;</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>Any protected page<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">session_start();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ( <span class="keyword">isset</span>( $_SESSION[<span class="string">'user_id'</span>] ) ) &#123;</span><br><span class="line">    <span class="comment">// Get user data if session exists</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Redirect to the login page</span></span><br><span class="line">    header(<span class="string">"Location: https://www.yourdomain.com/login.php"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>Logout<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">session_start();</span><br><span class="line">session_destroy();</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<h2 id="如何用-cookie-based-session-紀錄使用者狀態"><a href="#如何用-cookie-based-session-紀錄使用者狀態" class="headerlink" title="如何用 cookie-based session 紀錄使用者狀態"></a>如何用 cookie-based session 紀錄使用者狀態</h2><p>紀錄使用者狀態也可以單純只使用 cookie，把 user 的身份和其他資訊都存在 cookie 裡，然後 server 就只看這個 cookie 去判斷你是誰。<br>當然儲存的資訊都會經過加密處理，但是還是有被破解的風險，而且 cookie 有儲存大小 4k 的限制，所以實務上有可能會 session 和 cookie-based session 配合使用。</p>
<p>缺點：</p>
<ul>
<li>不適合存敏感資訊<br><br></li>
</ul>
<h2 id="再聊聊-persistent-cookie-amp-session-cookie"><a href="#再聊聊-persistent-cookie-amp-session-cookie" class="headerlink" title="再聊聊 persistent cookie &amp; session cookie"></a>再聊聊 persistent cookie &amp; session cookie</h2><p>概念上 cookie 又分成兩種：</p>
<ul>
<li><p>Persistent cookie</p>
<p>  就是明確指定 cookie 的存活時間，直到指定的時間為止，即便瀏覽器關閉 cookie 依然活著。</p>
  <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setcookie(<span class="string">"TestCookie"</span>, $value, time() + <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Session cookie </p>
<p>  session cookie 則是相反，不指定存活時間，只活在這個瀏覽器的 session 期間，關閉瀏覽器後就被清除了。但是實測後發現如果在 chrome 上有勾選<code>繼續瀏覽上次開啟的網頁(Ｃontinue where you letf off)</code>，session cookie 是不會被清除的。<a href="https://stackoverflow.com/questions/10617954/chrome-doesnt-delete-session-cookies" target="_blank" rel="noopener">Ref</a><br><br></p>
</li>
</ul>
<h2 id="比較一下-cookie-amp-local-storage-amp-session-storage"><a href="#比較一下-cookie-amp-local-storage-amp-session-storage" class="headerlink" title="比較一下 cookie &amp; local storage &amp; session storage"></a>比較一下 cookie &amp; local storage &amp; session storage</h2><p>HTML5 新增的兩種儲存方式： local storage &amp; session storage，下面把他們與 cookie 做一下比較。</p>
<table>
<thead>
<tr>
<th></th>
<th>Cookies</th>
<th>Local Storage</th>
<th>Session Storage</th>
</tr>
</thead>
<tbody>
<tr>
<td>Capacity</td>
<td>4kb</td>
<td>10mb</td>
<td>5mb</td>
</tr>
<tr>
<td>Browsers</td>
<td>HTML4/HTML5</td>
<td>HTML5</td>
<td>HTML5</td>
</tr>
<tr>
<td>Accessible from</td>
<td>Any winodw</td>
<td>Any winodw</td>
<td>Same tab</td>
</tr>
<tr>
<td>Expires</td>
<td>Manually set</td>
<td>Never</td>
<td>On tab close</td>
</tr>
<tr>
<td>Storage Location</td>
<td>Browser and server</td>
<td>Browser only</td>
<td>Browser only</td>
</tr>
<tr>
<td>Sent with requests</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>Restriction</td>
<td>Same domain</td>
<td>Same domain</td>
<td>Same domain</td>
</tr>
</tbody>
</table>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="http://fred-zone.blogspot.com/2014/01/web-session.html" target="_blank" rel="noopener">Web 技術中的 Session 是什麼？</a></p>
<p><a href="https://www.johnmorrisonline.com/build-php-login-form-using-sessions/" target="_blank" rel="noopener">How to Build a PHP Login Form Using Sessions</a> </p>
<p><a href="https://www.youtube.com/watch?v=AwicscsvGLg" target="_blank" rel="noopener">cookies vs localStorage vs sessionStorage</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuchitung.github.io/2019/04/15/identify-users-with-cookie-and-session/" data-id="ckcdhgeg60008qay5fr6p4ery" class="article-share-link">Share</a>
      
        <a href="https://yuchitung.github.io/2019/04/15/identify-users-with-cookie-and-session/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/">web</a></li></ul>

    </footer>
  </div>
  
  
</article>


  
    <article id="post-crontab-setting" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/08/crontab-setting/" class="article-date">
  <time datetime="2019-04-08T02:45:41.000Z" itemprop="datePublished">2019-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/08/crontab-setting/">crontab 設定</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="基本介紹"><a href="#基本介紹" class="headerlink" title="基本介紹"></a>基本介紹</h2><p>crontab 用來設定 Linux 上例行性工作，由 crond 提供排程服務。</p>
<p>crond 預設有三個地方會有執行腳本設定檔：</p>
<p><code>/etc/crontab</code> : 一般放置系統排程<br><code>/etc/cron.d/*</code>: 一般放置系統排程，或是自己開發的軟體所需的排程，例如 /etc/cron.d/myJob<br><code>/var/spool/cron/*</code>: 使用者自己的 crontab 設定</p>
<hr>
<h3 id="管理使用權限"><a href="#管理使用權限" class="headerlink" title="管理使用權限"></a>管理使用權限</h3><p><code>/etc/cron.allow</code>：紀錄可以使用的帳號<br><code>/etc/cron.deny</code>：紀錄不可以使用的帳號</p>
<p>建議擇一使用即可</p>
<hr>
<h3 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h3><p><code>設定個別使用者的 crontab</code></p>
<p>編輯排程，其真正代表的是編輯 /usr/bin/crontab 這個執行檔</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br></pre></td></tr></table></figure>
<p>移除所有的 crontab 的工作內容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -r</span><br></pre></td></tr></table></figure>
<p>顯示目前排程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -l</span><br></pre></td></tr></table></figure>
<p>改變排程的執行身份</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab -u</span><br></pre></td></tr></table></figure>
<p><code>設定系統的 crontab</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/crontab</span><br></pre></td></tr></table></figure>
<h3 id="啟動服務"><a href="#啟動服務" class="headerlink" title="啟動服務"></a>啟動服務</h3><p>通常 crontab 設定完即啟用設定，但有些 Unix 版本如可能不會馬上啟用。<br>這時候需要重新啟動 crond 服務</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart crond</span><br></pre></td></tr></table></figure>
<h2 id="規則"><a href="#規則" class="headerlink" title="規則"></a>規則</h2><table>
<thead>
<tr>
<th>分</th>
<th>小時</th>
<th>日</th>
<th>月</th>
<th>星期</th>
<th>執行身份</th>
<th>指令</th>
</tr>
</thead>
<tbody>
<tr>
<td>0~59</td>
<td>0~23</td>
<td>1~31</td>
<td>1-12</td>
<td>0-6</td>
<td>帳號</td>
<td>sh myJob.sh</td>
</tr>
</tbody>
</table>
<h2 id="範例"><a href="#範例" class="headerlink" title="範例"></a>範例</h2><p>每分鐘執行一次：輸出文字至檔案 test.txt</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * echo &apos;test&apos; &gt;&gt; /home/yuchi/test.txt</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>online crontab editor<br><a href="https://crontab.guru/" target="_blank" rel="noopener">https://crontab.guru/</a></p>
<p><a href="https://code.kpman.cc/2015/02/11/%E5%88%A9%E7%94%A8-crontab-%E4%BE%86%E5%81%9A-Linux-%E5%9B%BA%E5%AE%9A%E6%8E%92%E7%A8%8B/" target="_blank" rel="noopener">https://code.kpman.cc/2015/02/11/%E5%88%A9%E7%94%A8-crontab-%E4%BE%86%E5%81%9A-Linux-%E5%9B%BA%E5%AE%9A%E6%8E%92%E7%A8%8B/</a></p>
<p><a href="http://linux.vbird.org/linux_basic/0430cron.php" target="_blank" rel="noopener">http://linux.vbird.org/linux_basic/0430cron.php</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuchitung.github.io/2019/04/08/crontab-setting/" data-id="ckcdhgefo0000qay5jmbz6k02" class="article-share-link">Share</a>
      
        <a href="https://yuchitung.github.io/2019/04/08/crontab-setting/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/job/">job</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
  
</article>


  
    <article id="post-wait-until-all-jquery-ajax-calls-are-done" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/06/wait-until-all-jquery-ajax-calls-are-done/" class="article-date">
  <time datetime="2019-04-06T01:36:22.000Z" itemprop="datePublished">2019-04-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/06/wait-until-all-jquery-ajax-calls-are-done/">等待所有 ajax 請求完成</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>用 jQuery 實現 promise，待所有 ajax 執行完後才執行指定操作</p>
<p>notice: 所有 ajax call 為非同步執行</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demonstrate</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> urls = [<span class="string">"url_1"</span>, <span class="string">"url_2"</span>, <span class="string">"url_3"</span>];</span><br><span class="line"></span><br><span class="line">  callAjaxRequsts(urls)</span><br><span class="line">    .done(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"all done"</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    .fail(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"error"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">callAjaxRequsts</span>(<span class="params">urls</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> requests = $.map(urls, <span class="function"><span class="keyword">function</span>(<span class="params">value, index</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $</span><br><span class="line">      .ajax(&#123;</span><br><span class="line">        url: value,</span><br><span class="line">        type: <span class="string">"post"</span></span><br><span class="line">      &#125;)</span><br><span class="line">      .done(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> $.when.apply($, requests);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://stackoverflow.com/questions/23300168/deferred-promise-ajax-loop-then-never-happens" target="_blank" rel="noopener">https://stackoverflow.com/questions/23300168/deferred-promise-ajax-loop-then-never-happens</a><br><a href="https://stackoverflow.com/questions/3709597/wait-until-all-jquery-ajax-requests-are-done" target="_blank" rel="noopener">https://stackoverflow.com/questions/3709597/wait-until-all-jquery-ajax-requests-are-done</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuchitung.github.io/2019/04/06/wait-until-all-jquery-ajax-calls-are-done/" data-id="ckcdhgeh80011qay5pcx31al4" class="article-share-link">Share</a>
      
        <a href="https://yuchitung.github.io/2019/04/06/wait-until-all-jquery-ajax-calls-are-done/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jQuery/">jQuery</a></li></ul>

    </footer>
  </div>
  
  
</article>


  
    <article id="post-set-virtual-host-in-apache" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/06/set-virtual-host-in-apache/" class="article-date">
  <time datetime="2019-04-06T01:23:28.000Z" itemprop="datePublished">2019-04-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/06/set-virtual-host-in-apache/">在 apache 設定 virtual host</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h2><p>在同一台 server 上運行多個服務，例如 HTTP、FTP、EMAIL 等。</p>
<h3 id="設定檔位置"><a href="#設定檔位置" class="headerlink" title="設定檔位置"></a>設定檔位置</h3><p>傳統設定位置為<code>/etc/httpd/conf/httpd.conf</code>  </p>
<p>apache2 的設定位置為　<code>/etc/apache2/sites-available/000-default.conf</code><br>或是在 <code>/etc/apache2/sites-available</code> 下建立一個專用的設定檔，並 link 到　<code>/etc/apache2/sites-enabled</code>。<br>預設情況是　<code>/etc/apache2/sites-enabled/*.conf</code> 都會被使用，詳細內容可以參見　<code>/etc/apach2/apach2.conf</code>。</p>
<p>修改完設定後重起服務，才會生效。</p>
<h2 id="模式"><a href="#模式" class="headerlink" title="模式"></a>模式</h2><h3 id="網址名稱對應（Name-based）"><a href="#網址名稱對應（Name-based）" class="headerlink" title="網址名稱對應（Name-based）"></a><code>網址名稱對應（Name-based）</code></h3><p>在同一台機器以及 ip 下，架設不同的網站。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName ilovecats.com</span><br><span class="line">    DocumentRoot &quot;/www/cat&quot;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName ilovedogs.com</span><br><span class="line">    DocumentRoot &quot;/www/dogs&quot;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    ServerName api.ilovedogs.com</span><br><span class="line">    DocumentRoot &quot;/www/api/dogs&quot;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<h3 id="IP位址對應（IP-based）"><a href="#IP位址對應（IP-based）" class="headerlink" title="IP位址對應（IP-based）"></a><code>IP位址對應（IP-based）</code></h3><p>在同一台機器但不同 ip 下，架設不同的網站。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost 192.168.1.123:80&gt;</span><br><span class="line">    ServerName ilovecats.com</span><br><span class="line">    DocumentRoot &quot;/www/cat&quot;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost 123.123.123.123:8888&gt;</span><br><span class="line">    ServerName ilovedog.com</span><br><span class="line">    DocumentRoot &quot;/www/dog&quot;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://zh.wikipedia.org/zh-tw/%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA" target="_blank" rel="noopener">https://zh.wikipedia.org/zh-tw/%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA</a></p>
<p><a href="https://notfalse.net/53/http-virtual-host" target="_blank" rel="noopener">https://notfalse.net/53/http-virtual-host</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuchitung.github.io/2019/04/06/set-virtual-host-in-apache/" data-id="ckcdhgegu000qqay54n7zegt0" class="article-share-link">Share</a>
      
        <a href="https://yuchitung.github.io/2019/04/06/set-virtual-host-in-apache/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/web/">web</a></li></ul>

    </footer>
  </div>
  
  
</article>


  
    <article id="post-useful-git-command" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/04/useful-git-command/" class="article-date">
  <time datetime="2019-04-04T01:30:17.000Z" itemprop="datePublished">2019-04-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/04/04/useful-git-command/">常用 git 指令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="建立一個新的-repository"><a href="#建立一個新的-repository" class="headerlink" title="建立一個新的 repository"></a><code>建立一個新的 repository</code></h2><ol>
<li><p>Create a new project at your git server（remote)</p>
</li>
<li><p>Initialize your new project at local</p>
</li>
<li><p>Set the remote url  </p>
</li>
</ol>
<p>ssh: <a href="mailto:git@git.server.com" target="_blank" rel="noopener">git@git.server.com</a>:namespace/project.git<br>https: <a href="https://git.server.com/namespace/project.git" target="_blank" rel="noopener">https://git.server.com/namespace/project.git</a> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin &lt;remote_url&gt;</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>Push your project</li>
<li>Done</li>
</ol>
<h2 id="config"><a href="#config" class="headerlink" title="config"></a><code>config</code></h2><p>檢查設定</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --list</span><br></pre></td></tr></table></figure>
<p>設定</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">"Yuchi Tung"</span></span><br><span class="line">$ git config --global user.email yuchi@example.com</span><br></pre></td></tr></table></figure>
<p>設定檔路徑</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/.gitconfig</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<p><br></p>
<h2 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a><code>初始化</code></h2><p>建立一個新的 repository</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>
<p>取得 remote repository</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone &lt;url&gt;</span><br><span class="line"></span><br><span class="line">git clone git@gitlab.com:project/myProject.git</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<p><br></p>
<h2 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a><code>基本指令</code></h2><p>查看狀態</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br></pre></td></tr></table></figure>
<p>將修改的檔案加入 stage</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add  &lt;file_path/file_name&gt;</span><br></pre></td></tr></table></figure>
<p>將<code>所有</code>修改的檔案加入 stage</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure>
<p>檢視所有 commit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure>
<p>檢視特定檔案的所有 commit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --follow &lt;file_name&gt;</span><br></pre></td></tr></table></figure>
<p>放棄所有沒有 commit 的修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<p><br></p>
<h2 id="commit-相關"><a href="#commit-相關" class="headerlink" title="commit 相關"></a><code>commit 相關</code></h2><p>建立 commit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git commit</span><br><span class="line">git commit -m &quot;commit message&quot;</span><br></pre></td></tr></table></figure>
<p>修改最後一個 commit 的 message</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit --amend</span><br></pre></td></tr></table></figure>
<p>查看 commit 的 comment</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show &lt;commit_id&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<p><br></p>
<h2 id="branch-相關"><a href="#branch-相關" class="headerlink" title="branch 相關"></a><code>branch 相關</code></h2><p>查看 branch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch &lt;branch_name&gt;</span><br></pre></td></tr></table></figure>
<p>列出所有 branch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch</span><br></pre></td></tr></table></figure>
<p>切換 branch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout &lt;branch_name&gt;</span><br></pre></td></tr></table></figure>
<p>建立新 branch 並 checkout</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b &lt;branch_name&gt;</span><br></pre></td></tr></table></figure>
<p>重新命名 branch name</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -m &lt;new_branch_name&gt;</span><br></pre></td></tr></table></figure>
<p>刪除 branch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -d &lt;branch_name&gt;</span><br></pre></td></tr></table></figure>
<p>建立一個與 remote branch 同名的 branch 並 track 它<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout --track origin/branch_name</span><br></pre></td></tr></table></figure></p>
<p>設定 branch 的 upstream<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -u &lt;remote name&gt; &lt;branch name&gt;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<hr>
<p><br></p>
<h2 id="push-amp-pull"><a href="#push-amp-pull" class="headerlink" title="push &amp; pull"></a><code>push &amp; pull</code></h2><p>pull</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull</span><br></pre></td></tr></table></figure>
<p>push</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;remote_name&gt; &lt;branch_name&gt;</span><br></pre></td></tr></table></figure>
<p>強制 push</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push &lt;remote name&gt; &lt;branch name&gt; --force</span><br></pre></td></tr></table></figure>
<p>Push the current branch and set the remote as upstream<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git push -u &lt;remote name&gt; &lt;branch_name&gt;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<hr>
<p><br></p>
<h2 id="merge-相關"><a href="#merge-相關" class="headerlink" title="merge 相關"></a><code>merge 相關</code></h2><p>開發分支上有多 commit，rebase 整理主線進分支，合併線圖，線圖看起來比較乾淨<br>git rebase master</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge &lt;target_branch_to_merge&gt;</span><br></pre></td></tr></table></figure>
<p>不產生合併的 commit<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git merge --no-commit</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<hr>
<p><br></p>
<h2 id="取消"><a href="#取消" class="headerlink" title="取消"></a><code>取消</code></h2><p>取消這次的修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -- &lt;my_file&gt;</span><br></pre></td></tr></table></figure>
<p>將檔案移除 stage 狀態</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset Head &lt;my_file&gt;</span><br><span class="line">git reset -- &lt;my_file&gt;</span><br></pre></td></tr></table></figure>
<p>取消剛剛的 merge/rebase/reset，回到上一個 commit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard ORIG_HEAD</span><br></pre></td></tr></table></figure>
<p>回到上一個 commit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br></pre></td></tr></table></figure>
<p>回到上兩個 commit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD~2</span><br></pre></td></tr></table></figure>
<p>回到指定 commit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard &lt;commit_hsa1&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<p><br></p>
<h2 id="查詢"><a href="#查詢" class="headerlink" title="查詢"></a><code>查詢</code></h2><p>顯示 remote branch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git remote show origin</span><br><span class="line">git branch -r</span><br><span class="line">git branch -a</span><br></pre></td></tr></table></figure>
<p>查詢 branch 追蹤的遠端分支</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -vv</span><br></pre></td></tr></table></figure>
<p>以關鍵字查詢 branch name</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -a | grep &lt;keyword&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<p><br></p>
<h2 id="diff"><a href="#diff" class="headerlink" title="diff"></a><code>diff</code></h2><p>查看 staged files 的更動</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff --staged</span><br></pre></td></tr></table></figure>
<p>查看還沒有加入 stage 的異動</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff &lt;my_file_name&gt;</span><br></pre></td></tr></table></figure>
<p>diff 兩個 branch</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff &lt;branch_1&gt; &lt;branch_2&gt;</span><br></pre></td></tr></table></figure>
<p>diff 單一檔案<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git diff &lt;branch&gt;:&lt;dir&gt;/&lt;filename&gt; &lt;branch&gt;:&lt;div&gt;/&lt;filename&gt;</span><br></pre></td></tr></table></figure></p>
<p><br></p>
<hr>
<p><br></p>
<h2 id="stash-暫存"><a href="#stash-暫存" class="headerlink" title="stash 暫存"></a><code>stash 暫存</code></h2><p>暫存</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash</span><br></pre></td></tr></table></figure>
<p>查看所有 stash</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure>
<p>套用最後一個 stash</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply</span><br></pre></td></tr></table></figure>
<p>套用指定的 stash</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply &lt;stash@&#123;index&#125;&gt;</span><br></pre></td></tr></table></figure>
<p>使用 cherry pick 挑出指定 commit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick &lt;sha1&gt; &lt;sha1&gt;</span><br></pre></td></tr></table></figure>
<p>使用 cherry pick 挑出指定多個指定 commit</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git cherry-pick &lt;sha1&gt; &lt;sha1&gt;</span><br></pre></td></tr></table></figure>
<p><br></p>
<hr>
<p><br></p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a><code>其他</code></h2><h3 id="從-git-中移除已經被-commited-的檔案"><a href="#從-git-中移除已經被-commited-的檔案" class="headerlink" title="從 git 中移除已經被 commited 的檔案"></a>從 git 中移除已經被 commited 的檔案</h3><p>除了以下動作別忘了也要將移除的的檔案加入 .gitignore</p>
<p>只移除追蹤，保留檔案</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm --cached &lt;path/file&gt;</span><br></pre></td></tr></table></figure>
<p>移除追蹤，刪除檔案</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm &lt;path/file&gt;</span><br></pre></td></tr></table></figure>
<p>移除追蹤，移除 folder 下所有 file， -r 表 recursive</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm -r --cached &lt;path&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p>cherry pick<br><a href="https://www.jianshu.com/p/08c3f1804b36" target="_blank" rel="noopener">https://www.jianshu.com/p/08c3f1804b36</a></p>
<p>undo git reset<br><a href="https://stackoverflow.com/questions/2510276/undoing-git-reset" target="_blank" rel="noopener">https://stackoverflow.com/questions/2510276/undoing-git-reset</a></p>
<p>rebase vs reset vs revert<br><a href="http://rubyist.marsz.tw/blog/2012-01-17/git-reset-and-revert-to-rollback-commit/" target="_blank" rel="noopener">http://rubyist.marsz.tw/blog/2012-01-17/git-reset-and-revert-to-rollback-commit/</a></p>
<p><a href="https://blog.gogojimmy.net/2012/01/21/how-to-use-git-2-basic-usage-and-worflow/" target="_blank" rel="noopener">https://blog.gogojimmy.net/2012/01/21/how-to-use-git-2-basic-usage-and-worflow/</a><br><a href="http://rubyist.marsz.tw/blog/2012-01-17/git-reset-and-revert-to-rollback-commit/" target="_blank" rel="noopener">http://rubyist.marsz.tw/blog/2012-01-17/git-reset-and-revert-to-rollback-commit/</a><br><a href="https://blog.wu-boy.com/2010/08/git-%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%EF%BC%9A%E5%88%A9%E7%94%A8-git-reset-%E6%81%A2%E5%BE%A9%E6%AA%94%E6%A1%88%E3%80%81%E6%9A%AB%E5%AD%98%E7%8B%80%E6%85%8B%E3%80%81commit-%E8%A8%8A%E6%81%AF/" target="_blank" rel="noopener">https://blog.wu-boy.com/2010/08/git-%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6%EF%BC%9A%E5%88%A9%E7%94%A8-git-reset-%E6%81%A2%E5%BE%A9%E6%AA%94%E6%A1%88%E3%80%81%E6%9A%AB%E5%AD%98%E7%8B%80%E6%85%8B%E3%80%81commit-%E8%A8%8A%E6%81%AF/</a></p>
<p>重寫歷史<br><a href="https://git-scm.com/book/zh-tw/v1/Git-%E5%B7%A5%E5%85%B7-%E9%87%8D%E5%AF%AB%E6%AD%B7%E5%8F%B2" target="_blank" rel="noopener">https://git-scm.com/book/zh-tw/v1/Git-%E5%B7%A5%E5%85%B7-%E9%87%8D%E5%AF%AB%E6%AD%B7%E5%8F%B2</a></p>
<p>how to see which git branches are tracking which remote upstream branch<br><a href="https://stackoverflow.com/questions/4950725/how-to-see-which-git-branches-are-tracking-which-remote-upstream-branch" target="_blank" rel="noopener">https://stackoverflow.com/questions/4950725/how-to-see-which-git-branches-are-tracking-which-remote-upstream-branch</a></p>
<p>ignoring a directory from a git repo after its been added<br><a href="https://stackoverflow.com/questions/6618612/ignoring-a-directory-from-a-git-repo-after-its-been-added" target="_blank" rel="noopener">https://stackoverflow.com/questions/6618612/ignoring-a-directory-from-a-git-repo-after-its-been-added</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yuchitung.github.io/2019/04/04/useful-git-command/" data-id="ckcdhgeh2000zqay5pgmgta9r" class="article-share-link">Share</a>
      
        <a href="https://yuchitung.github.io/2019/04/04/useful-git-command/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/PhpStorm/">PhpStorm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api/">api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design-pattern/">design-pattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/env/">env</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jQuery/">jQuery</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/job/">job</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/laravel/">laravel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/oop/">oop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/security/">security</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/solid/">solid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/timezone/">timezone</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/PhpStorm/" style="font-size: 10px;">PhpStorm</a> <a href="/tags/api/" style="font-size: 10px;">api</a> <a href="/tags/design-pattern/" style="font-size: 10px;">design-pattern</a> <a href="/tags/env/" style="font-size: 10px;">env</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/job/" style="font-size: 10px;">job</a> <a href="/tags/laravel/" style="font-size: 10px;">laravel</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/oop/" style="font-size: 16.67px;">oop</a> <a href="/tags/php/" style="font-size: 13.33px;">php</a> <a href="/tags/security/" style="font-size: 10px;">security</a> <a href="/tags/solid/" style="font-size: 16.67px;">solid</a> <a href="/tags/timezone/" style="font-size: 10px;">timezone</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/web/" style="font-size: 20px;">web</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/07/08/set-up-xdebug-with-phpstorm-and-laradock/">使用 Laradock 和 PhpStorm 設定 xdebug</a>
          </li>
        
          <li>
            <a href="/2020/07/06/cgi-fastcgi-and-phpfpm/">CGI、FastCGI 和 PHP-FPM</a>
          </li>
        
          <li>
            <a href="/2020/04/21/csrf-introduction/">CSRF 介紹</a>
          </li>
        
          <li>
            <a href="/2019/07/14/where-to-store-json-web-token/">JWT 到底要存哪裡？</a>
          </li>
        
          <li>
            <a href="/2019/07/10/introduction-to-json-web-token/">淺談 JWT (Json Web Token)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Yuchi Tung<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'yuchi-blog';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>